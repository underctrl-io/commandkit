---
title: CommandKitEnvironment
description: No description provided
---


## CommandKitEnvironment


```typescript
new CommandKitEnvironment(commandkit)
```
| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| commandkit | [CommandKit](/docs/api-reference/classes/CommandKit) | ❌ | The commandkit instance. |


## Properties
### public commandkit: any
The commandkit instance.

- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L33)
### public context: any
Get the context. `null` if not set.

- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L47)
### public variables: any
The variables store for this environment.

- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L97)

## Methods
### public clearAllDeferredFunctions(): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Clear all deferred functions.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L144)
### public clearDeferredFunction(id): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Clear a deferred function by id.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| id | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | ❌ | The deferred function id to clear. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L120)
### public getExecutionError(): null | [Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)
Get the execution error.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L55)
### public getExecutionTime(): [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)
Get the execution time in milliseconds.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L180)
### public getMarker(): [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)
Get the marker.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L172)
### public getType(): [CommandKitEnvironmentType](/docs/api-reference/enums/CommandKitEnvironmentType)
Get the environment type.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L75)
### public markEnd(): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Mark the end of a command execution.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L162)
### public markStart(marker): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Mark the start of a command execution.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| marker | [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | ❌ | The marker to set. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L153)
### public registerDeferredFunction(fn): [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)
Register a deferred function.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| fn | GenericFunction\<\[ | CommandKitEnvironment | ]> | ❌ | The deferred function to register. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L107)
### public runDeferredFunctions(): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Run all deferred functions sequentially.



- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L128)
### public setContext(context): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Set the context.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| context | Context | ❌ | The context to set. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L39)
### public setExecutionError(error): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Set the execution error.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| error | [Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error) | ❌ | The error to set. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L64)
### public setType(type): [void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)
Set the environment type.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| type | [CommandKitEnvironmentType](/docs/api-reference/enums/CommandKitEnvironmentType) | ❌ | The environment type to set. |


- [Source](https://github.com/underctrl-io/commandkit/blob/98b939d6fdf8beaae597b4dc0351a139da52ee8d/packages/commandkit/src/context/environment.ts#L90)