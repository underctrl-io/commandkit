---
title: RuntimePlugin
description: No description provided
---


## RuntimePlugin extends PluginCommon\<T, CommandKitPluginRuntime>


```typescript
new RuntimePlugin(options)
```
| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| options | T | ❌ |


## Properties
### public id: any
- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L16)
### public loadedAt: any
- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L17)
### public name: any
- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L18)
### public options: any
- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L19)
### public type: any
- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L18)

## Methods
### public activate(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called when this plugin is activated



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L24)
### public deactivate(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called when this plugin is deactivated



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/PluginCommon.ts#L29)
### public executeCommand(ctx, env, source, command, execute): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)>
Called before command is executed. This method can execute the command itself.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | N/A |
| env | [CommandKitEnvironment](/docs/api-reference/classes/CommandKitEnvironment) | ❌ | N/A |
| source | [Interaction](https://discord.js.org/docs/packages/discord.js/main/Interaction:Class) | Message | ❌ | The source that triggered the command |
| command | PreparedAppCommandExecution | ❌ | The command |
| execute | (   ...args | unknown\[ | ] ) => [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<any> | ❌ | The function that executes the command |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L83)
### public onAfterClientLogin(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after the client logs in



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L55)
### public onAfterCommand(ctx, env): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after command and all of its deferred functions are executed.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| env | [CommandKitEnvironment](/docs/api-reference/classes/CommandKitEnvironment) | ❌ | The environment of the command. This environment contains the command execution data such as command context and more. |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L179)
### public onAfterCommandsLoad(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after commands are loaded



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L29)
### public onAfterEventsLoad(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after events are loaded



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L43)
### public onBeforeClientLogin(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before the client logs in



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L48)
### public onBeforeCommandsLoad(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before commands are loaded



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L22)
### public onBeforeEventsLoad(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before events are loaded



| Parameter | Type | Optional |
| ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L36)
### public onBeforeInteraction(ctx, interaction): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before interaction is handled



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | N/A |
| interaction | [Interaction](https://discord.js.org/docs/packages/discord.js/main/Interaction:Class) | ❌ | The interaction |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L63)
### public onBeforeMessageCommand(ctx, message): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before message command is processed



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | N/A |
| message | Message | ❌ | The message |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L72)
### public onBeforePrepareGuildCommandsRegistration(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before guild commands registration. This method can cancel the registration of the command and handle it manually.
This method is called before guilds of the command are resolved. It is called after `onBeforeRegisterCommands` if that stage was not handled.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | PreRegisterCommandsEvent | ❌ | The command registration data |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L158)
### public onBeforeRegisterCommands(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before command is registered to discord. This method can cancel the registration of the command and handle it manually.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | PreRegisterCommandsEvent | ❌ | N/A |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L136)
### public onBeforeRegisterGlobalCommands(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before global commands registration. This method can cancel the registration of the command and handle it manually.
This method is called after `onBeforeRegisterCommands` if that stage was not handled.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | PreRegisterCommandsEvent | ❌ | The command registration data |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L147)
### public onBeforeRegisterGuildCommands(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before guild commands registration. This method can cancel the registration of the command and handle it manually.
This method is called after guilds of the command are resolved. It is called after `onBeforePrepareGuildCommandsRegistration` if that stage was not handled.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | PreRegisterCommandsEvent | ❌ | The command registration data |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L169)
### public onCommandsRouterInit(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after commands router is initialized



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L105)
### public onEventsRouterInit(ctx): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called after events router is initialized



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L97)
### public performHMR(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called when HMR event is received



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | CommandKitHMREvent | ❌ | The event |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L114)
### public prepareCommand(ctx, commands): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<null | CommandBuilderLike>
Called before command is loaded for registration. This method can be used to modify the command data before it is loaded.



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| commands | CommandBuilderLike | ❌ | The command that is being loaded. This is a CommandBuilderLike object which represents Discord's command |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L124)
### public willEmitEvent(ctx, event): [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<[void](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined)>
Called before emitting an event



| Parameter | Type | Optional | Description |
| ----------- | ----------- | ----------- | ----------- |
| ctx | [CommandKitPluginRuntime](/docs/api-reference/classes/CommandKitPluginRuntime) | ❌ | The context |
| event | CommandKitEventDispatch | ❌ | The event that is being emitted |


- [Source](https://github.com/underctrl-io/commandkit/blob/141d1404ab18a8e659209a0fab65466bf3b6dd85/packages/commandkit/src/plugins/RuntimePlugin.ts#L189)